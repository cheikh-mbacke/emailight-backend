# ======================
# PRODUCTION CONFIGURATION
# ======================
# This file contains production environment variables
# Values are injected from GitHub Secrets during deployment

# ======================
# INFRASTRUCTURE CONFIG
# ======================

# MongoDB Configuration
MONGO_ROOT_USERNAME=emailight_admin
MONGO_ROOT_PASSWORD=${MONGO_ROOT_PASSWORD}
MONGO_DATABASE=emailight
MONGO_APP_USERNAME=emailight_app
MONGO_APP_PASSWORD=${MONGO_APP_PASSWORD}

# Redis Configuration
REDIS_PASSWORD=${REDIS_PASSWORD}

# ======================
# EXCEPTIONLESS - ERROR MONITORING
# ======================

# Exceptionless Configuration
EXCEPTIONLESS_PORT=5000

# ======================
# USER SERVICE
# ======================

USER_SERVICE_PORT=3001

# JWT & Security
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# Encryption key for OAuth tokens and SMTP credentials
ENCRYPTION_KEY=${ENCRYPTION_KEY}

# Rate Limiting (production values)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000

# ======================
# GOOGLE OAUTH (AUTHENTIFICATION UTILISATEUR)
# ======================

GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
GOOGLE_REDIRECT_URI=https://${DOMAIN}/auth/google/callback

# ======================
# GMAIL OAUTH (CONNEXIONS EMAIL)
# ======================

GMAIL_CLIENT_ID=${GMAIL_CLIENT_ID}
GMAIL_CLIENT_SECRET=${GMAIL_CLIENT_SECRET}
GMAIL_REDIRECT_URI=https://${DOMAIN}/auth/gmail/callback

# ======================
# TOKEN REFRESH SERVICE
# ======================

TOKEN_REFRESH_INTERVAL_MINUTES=60
TOKEN_REFRESH_THRESHOLD_MINUTES=30

# ======================
# SMTP CONFIGURATION
# ======================

# SMTP Configuration for user connections
SMTP_TIMEOUT=10000
SMTP_MAX_CONNECTIONS=5
SMTP_RATE_LIMIT=10

# System SMTP (for notifications/password reset)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT}
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_ENCRYPTION=SSL

# ======================
# UPLOAD CONFIGURATION
# ======================

UPLOAD_MAX_SIZE=5242880
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/webp,image/gif

# ======================
# MONITORING & LOGGING
# ======================

ENABLE_LOGGING=true
LOG_LEVEL=info
VERBOSE_LOGS=false

# Exceptionless - Error monitoring
USER_SERVICE_EXCEPTIONLESS_API_KEY=${USER_SERVICE_EXCEPTIONLESS_API_KEY}
USER_SERVICE_EXCEPTIONLESS_SERVER_URL=http://exceptionless:8080

# ======================
# LOCALISATION & APP
# ======================

LOCALE=fr-FR
TIMEZONE=Europe/Paris

# Application configuration
APP_NAME=Emailight
APP_BASE_URL=https://${DOMAIN}
SUPPORT_EMAIL=support@${DOMAIN}

# CORS Origins autoris√©es (production)
ALLOWED_ORIGINS=https://${DOMAIN},https://app.${DOMAIN}

# ======================
# ENVIRONMENT
# ======================

NODE_ENV=production
HOST=0.0.0.0

# ======================
# DOMAIN CONFIGURATION
# ======================

DOMAIN=${DOMAIN}
